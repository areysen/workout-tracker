(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[163],{8333:(e,t,s)=>{"use strict";s.d(t,{A:()=>o,AuthProvider:()=>i});var a=s(95155),r=s(12115),n=s(63233);let u=(0,r.createContext)(),i=e=>{let{children:t}=e,[s,i]=(0,r.useState)(void 0),[o,l]=(0,r.useState)(void 0),[c,d]=(0,r.useState)(void 0);return(0,r.useEffect)(()=>{n.supabase.auth.getSession().then(e=>{var t;let{data:{session:s}}=e;i(s),l(null!=(t=null==s?void 0:s.user)?t:null)});let{data:{subscription:e}}=n.supabase.auth.onAuthStateChange((e,t)=>{var s;i(t),l(null!=(s=null==t?void 0:t.user)?s:null),(null==t?void 0:t.user)?(async()=>{let{data:e,error:s}=await n.supabase.from("profiles").select("*").eq("user_id",t.user.id).single();s||!e?d(!1):d(!0)})():d(void 0)});return()=>{e.unsubscribe()}},[]),(0,a.jsx)(u.Provider,{value:{user:o,session:s,hasProfile:c,signInWithMagicLink:e=>n.supabase.auth.signInWithOtp({email:e,options:{emailRedirectTo:"".concat(window.location.origin,"/auth-callback")}}),signInWithProvider:e=>n.supabase.auth.signInWithOAuth({provider:e}),signInWithEmailPassword:(e,t)=>n.supabase.auth.signInWithPassword({email:e,password:t}),signUpWithEmailPassword:(e,t)=>n.supabase.auth.signUp({email:e,password:t},{emailRedirectTo:"".concat(window.location.origin,"/auth-callback")}),signOut:()=>n.supabase.auth.signOut()},children:t})},o=()=>(0,r.useContext)(u)},35695:(e,t,s)=>{"use strict";var a=s(18999);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},63233:(e,t,s)=>{"use strict";s.d(t,{DP:()=>r,JI:()=>u,LJ:()=>n,sA:()=>i,supabase:()=>a});let a=(0,s(10851).UU)("https://yfnbnytutxdbmyvfsyba.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlmbmJueXR1dHhkYm15dmZzeWJhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ5MjAwNTksImV4cCI6MjA2MDQ5NjA1OX0.HJhDpx79rDzl5DZIh3qJZbBrSwudG95htPXOs2IGD30",{auth:{persistSession:!0,detectSessionInUrl:!0}}),r=async()=>{let{data:e,error:t}=await a.from("workout_logs").select("*").order("date",{ascending:!0});return t?(console.error("Error fetching workout logs:",t.message),[]):e},n=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,{data:t,error:s}=await a.from("workout_logs").select("date, skipped").order("date",{ascending:!1}).limit(e);return s?(console.error("Error fetching workout logs for last N days:",s.message),[]):t},u=e=>{let t=0;for(let s of e){if(s.skipped)break;t++}return t},i=e=>{let t=0,s=0;for(let a of e)a.skipped?(s>t&&(t=s),s=0):s++;return s>t&&(t=s),t}},73444:(e,t,s)=>{Promise.resolve().then(s.bind(s,85868))},85868:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,dynamic:()=>i});var a=s(95155),r=s(12115),n=s(35695),u=s(8333);let i="force-dynamic";function o(e){let{children:t}=e,{user:s}=(0,u.A)(),i=(0,n.useRouter)();return((0,r.useEffect)(()=>{null===s&&i.replace("/login")},[s]),null===s)?null:(0,a.jsx)(a.Fragment,{children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[851,441,684,358],()=>t(73444)),_N_E=e.O()}]);