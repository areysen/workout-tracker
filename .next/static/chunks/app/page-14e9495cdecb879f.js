(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1663:(e,s,t)=>{Promise.resolve().then(t.bind(t,50439))},8333:(e,s,t)=>{"use strict";t.d(s,{A:()=>o,AuthProvider:()=>i});var a=t(95155),r=t(12115),n=t(63233);let u=(0,r.createContext)(),i=e=>{let{children:s}=e,[t,i]=(0,r.useState)(void 0),[o,l]=(0,r.useState)(void 0),[c,d]=(0,r.useState)(void 0);return(0,r.useEffect)(()=>{n.supabase.auth.getSession().then(e=>{var s;let{data:{session:t}}=e;i(t),l(null!=(s=null==t?void 0:t.user)?s:null)});let{data:{subscription:e}}=n.supabase.auth.onAuthStateChange((e,s)=>{var t;i(s),l(null!=(t=null==s?void 0:s.user)?t:null),(null==s?void 0:s.user)?(async()=>{let{data:e,error:t}=await n.supabase.from("profiles").select("*").eq("user_id",s.user.id).single();t||!e?d(!1):d(!0)})():d(void 0)});return()=>{e.unsubscribe()}},[]),(0,a.jsx)(u.Provider,{value:{user:o,session:t,hasProfile:c,signInWithMagicLink:e=>n.supabase.auth.signInWithOtp({email:e,options:{emailRedirectTo:"".concat(window.location.origin,"/auth-callback")}}),signInWithProvider:e=>n.supabase.auth.signInWithOAuth({provider:e}),signInWithEmailPassword:(e,s)=>n.supabase.auth.signInWithPassword({email:e,password:s}),signUpWithEmailPassword:(e,s)=>n.supabase.auth.signUp({email:e,password:s},{emailRedirectTo:"".concat(window.location.origin,"/auth-callback")}),signOut:()=>n.supabase.auth.signOut()},children:s})},o=()=>(0,r.useContext)(u)},35695:(e,s,t)=>{"use strict";var a=t(18999);t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},50439:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i,dynamic:()=>u});var a=t(12115),r=t(35695),n=t(8333);let u="force-dynamic";function i(){let{user:e,hasProfile:s}=(0,n.A)(),t=(0,r.useRouter)();return(0,a.useEffect)(()=>{console.log("user:",e),console.log("hasProfile:",s),null===e?t.replace("/login"):e&&!1===s?t.replace("/setup"):e&&!0===s&&t.replace("/today")},[e,s]),null}},63233:(e,s,t)=>{"use strict";t.d(s,{DP:()=>r,JI:()=>u,LJ:()=>n,sA:()=>i,supabase:()=>a});let a=(0,t(10851).UU)("https://yfnbnytutxdbmyvfsyba.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlmbmJueXR1dHhkYm15dmZzeWJhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ5MjAwNTksImV4cCI6MjA2MDQ5NjA1OX0.HJhDpx79rDzl5DZIh3qJZbBrSwudG95htPXOs2IGD30",{auth:{persistSession:!0,detectSessionInUrl:!0}}),r=async()=>{let{data:e,error:s}=await a.from("workout_logs").select("*").order("date",{ascending:!0});return s?(console.error("Error fetching workout logs:",s.message),[]):e},n=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,{data:s,error:t}=await a.from("workout_logs").select("date, skipped").order("date",{ascending:!1}).limit(e);return t?(console.error("Error fetching workout logs for last N days:",t.message),[]):s},u=e=>{let s=0;for(let t of e){if(t.skipped)break;s++}return s},i=e=>{let s=0,t=0;for(let a of e)a.skipped?(t>s&&(s=t),t=0):t++;return t>s&&(s=t),s}}},e=>{var s=s=>e(e.s=s);e.O(0,[851,441,684,358],()=>s(1663)),_N_E=e.O()}]);