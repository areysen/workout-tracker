(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[318],{7719:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>g,dynamic:()=>h});var s=o(95155),r=o(12115),n=o(35695),a=o(66766),i=o(63233),l=o(8333),d=o(19433),u=o(46012),c=o(42827);let h="force-dynamic",m={chest:["Drive through your chest, not your shoulders! \uD83C\uDFCB️‍♂️","Control the negative for more gains! \uD83D\uDCA5","Keep your shoulder blades tucked for max power! \uD83D\uDD25"],back:["Pull with your elbows, not your hands! \uD83D\uDCAA","Squeeze your back at the top of every rep! \uD83D\uDE80","Focus on mind-muscle connection! \uD83C\uDFAF"],legs:["Push through your heels for more power! \uD83E\uDDB5","Brace your core before every squat! \uD83D\uDEE1️","Own the bottom of every rep! \uD83E\uDDF1"],arms:["Slow controlled curls > heavy swinging! \uD83C\uDFCB️","Stretch and squeeze on every rep! \uD83C\uDFAF","Lock in your elbows when curling! \uD83D\uDCAA"],shoulders:["Press overhead with control, not momentum! \uD83C\uDFCB️‍♀️","Lead lateral raises with your elbows! \uD83D\uDD25","Stabilize your core during all pressing! \uD83D\uDEE1️"],core:["Control the motion, don't rush it! \uD83E\uDDD8‍♂️","Exhale hard at the top of every crunch! \uD83C\uDF2C️","Focus on tension, not speed! ⚡"],conditioning:["Stay light on your feet! \uD83C\uDFC3‍♂️","Pace yourself — fast start means fast burnout! \uD83E\uDD75","Breathe through your nose to stay calm! \uD83D\uDE24"],default:["Attack today like a champion! \uD83D\uDCA5","Every rep counts! Make them perfect! \uD83C\uDFAF","You vs. You — Win today! \uD83C\uDFC6"]};function p(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=m[(null==t||null==(e=t.toLowerCase)?void 0:e.call(t))||""]||m.default;return o[Math.floor(Math.random()*o.length)]}function g(){var e;let{user:t}=(0,l.A)(),[h,m]=(0,r.useState)(void 0),[g,x]=(0,r.useState)(null),[w,f]=(0,r.useState)(!0),[b,v]=(0,r.useState)(!1),[y,k]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[D,C]=(0,r.useState)(0),[S,_]=(0,r.useState)(0),[I,E]=(0,r.useState)(null),A=(0,n.useRouter)(),{showToast:P}=(0,c.d)();(0,r.useEffect)(()=>{(async()=>{if(!(null==t?void 0:t.id))return;console.log("Auth User ID:",t.id);let{data:e,error:o}=await i.supabase.from("profiles").select("user_id").eq("user_id",t.id).maybeSingle();o?(console.error("Error fetching profile:",o),m(!1)):m(!!e)})()},[t]),(0,r.useEffect)(()=>{h&&i.supabase.from("profiles").select("first_name, full_name").eq("user_id",t.id).single().then(e=>{let{data:t}=e;return E(t)}).catch(console.error)},[h,t]);let W=(0,d.Gq)(),J=(0,d.KG)(W,{weekday:"long"}),O=async()=>{f(!0);let e=(await (0,i.DP)()).find(e=>e.date===W);if(!e){let t=new Date().toLocaleDateString("en-US",{weekday:"long"}).toLowerCase(),{supabase:s}=await Promise.resolve().then(o.bind(o,63233)),{data:r,error:n}=await s.from("workout_templates").select("workout_name, exercises, muscle_group").eq("day_of_week",t);!n&&r&&r.length>0&&(e={date:W,forecast:!0,muscle_group:r[0].muscle_group,workout_name:r[0].workout_name})}x(e||null),f(!1)};return((0,r.useEffect)(()=>{O()},[W]),(0,r.useEffect)(()=>{!async function(){let e=await (0,i.LJ)(30);C((0,i.JI)(e));let t=await (0,i.DP)();_((0,i.sA)(t))}()},[]),!1===h)?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex flex-col items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-[#343E44] p-6 rounded-lg text-center",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Let’s finish setting up your account"}),(0,s.jsx)("button",{className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-pink-700 rounded-2xl text-white font-bold",onClick:()=>A.push("/setup"),children:"Go to Setup"})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-[#242B2F] p-4 max-w-3xl mx-auto text-white",children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold mb-1",children:["\uD83D\uDC4B Welcome Back,"," ",(null==I?void 0:I.first_name)||(null==I?void 0:I.full_name)||(null==t||null==(e=t.user_metadata)?void 0:e.full_name)||(null==t?void 0:t.email)||"there","!"]}),(0,s.jsxs)("p",{className:"text-md text-gray-300 mb-6",children:["\uD83D\uDCC5 Today is ",J]}),w?(0,s.jsx)("div",{className:"bg-[#2E353A] p-6 rounded-2xl mb-8 border border-pink-400 flex justify-center items-center h-40 shadow-glow",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-pink-400"})}):g&&(0,s.jsxs)("div",{className:"bg-[#2E353A] p-6 rounded-2xl mb-8 border border-pink-400 shadow-glow hover:shadow-glow-hover transition duration-300 text-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-extrabold mb-2 text-pink-400",children:g.skipped?"\uD83C\uDFD6️ Recovery Day":"\uD83C\uDFAF Today's Mission"}),(0,s.jsx)("p",{className:"text-lg mb-4 font-semibold",children:g.skipped?"Workout Skipped: ".concat(g.muscle_group||"Workout"):g.forecast?"Planned Workout: ".concat(g.workout_name||"Workout"):"Completed Workout: ".concat(g.muscle_group||"Workout")}),(0,s.jsx)("p",{className:"text-sm text-gray-400 italic",children:p(null==g?void 0:g.muscle_group)})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 mb-6",children:[(null==g?void 0:g.skipped)?(0,s.jsx)("button",{disabled:!0,className:"bg-[#4A5568] text-white py-3 px-6 rounded-2xl font-semibold shadow-glow hover:shadow-glow-hover transition duration-300 text-center",children:"Skipped"}):(null==g?void 0:g.forecast)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"bg-gradient-to-r from-pink-500 to-pink-700 text-white py-3 px-6 rounded-2xl font-bold text-lg shadow-glow hover:shadow-glow-hover transition duration-300",onClick:()=>{let e=(null==g?void 0:g.forecast)&&(null==g?void 0:g.template_id)?"?templateId=".concat(g.template_id):"";A.push("/log-workout".concat(e))},children:"Start Workout"}),(0,s.jsx)("button",{className:"bg-gradient-to-r from-pink-600 to-red-600 text-white py-3 px-6 rounded-2xl font-bold text-lg shadow-glow hover:shadow-glow-hover transition duration-300",onClick:()=>k(!0),children:"Skip Today"})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("button",{className:"bg-gradient-to-r from-pink-500 to-pink-700 text-white py-3 px-6 rounded-2xl font-bold text-lg shadow-glow hover:shadow-glow-hover transition duration-300",onClick:()=>A.push("/summary/".concat(W),{state:{fromTodayView:!0}}),children:"View Summary"})}),(0,s.jsx)("button",{className:"flex items-center justify-center bg-gradient-to-r from-indigo-500 to-indigo-700 text-white py-3 px-6 rounded-2xl font-semibold shadow-glow hover:shadow-glow-hover transition duration-300",onClick:()=>A.push("/calendar"),children:"\uD83D\uDCC5 View Calendar"})]}),(0,s.jsx)("div",{className:"bg-[#2E353A] p-6 rounded-2xl mb-6 border border-pink-400 shadow-glow hover:shadow-glow-hover transition duration-300 text-center",children:w?(0,s.jsxs)("div",{className:"animate-pulse space-y-2",children:[(0,s.jsx)("div",{className:"h-6 bg-gray-700 rounded-2xl w-1/2 mx-auto"}),(0,s.jsx)("div",{className:"h-4 bg-gray-700 rounded-2xl w-2/3 mx-auto"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-2 text-gray-300",children:"\uD83D\uDCC8 Your Progress"}),D>0?(0,s.jsxs)("p",{className:"text-gray-200",children:["\uD83D\uDD25 Current Streak:"," ",(0,s.jsxs)("span",{className:"font-bold",children:[D," days"]})]}):(0,s.jsx)("p",{className:"text-gray-200",children:"\uD83D\uDC63 Log your first workout to start your streak!"}),S>0&&(0,s.jsxs)("p",{className:"text-gray-200 mt-1",children:["\uD83C\uDFC6 Best Streak:"," ",(0,s.jsxs)("span",{className:"font-bold",children:[S," days"]})]})]})}),(0,s.jsxs)("div",{className:"mt-6 p-6 bg-[#2E353A] rounded-2xl border border-pink-400 shadow-glow hover:shadow-glow-hover transition duration-300 text-center",children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-2 text-pink-400",children:"⚡ Shortcuts"}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)("button",{className:"flex items-center justify-center bg-gradient-to-r from-pink-500 to-pink-700 text-white py-3 px-6 rounded-2xl font-semibold shadow-glow hover:shadow-glow-hover transition duration-300",onClick:()=>N(!0),children:[(0,s.jsx)(a.default,{src:"/assets/CrunchIcon.png",alt:"Crunch",width:20,height:20,className:"h-5 w-5 mr-2"}),(0,s.jsx)("span",{children:"Crunch Barcode"})]}),(0,s.jsxs)("button",{onClick:()=>window.location.href="shortcuts://run-shortcut?name=Open%20MacroFactor",className:"flex items-center justify-center bg-gradient-to-r from-indigo-500 to-indigo-700 text-white py-3 px-6 rounded-2xl font-semibold shadow-glow hover:shadow-glow-hover transition duration-300",children:[(0,s.jsx)(a.default,{src:"/assets/MacroFactorIcon.png",alt:"MacroFactor",width:20,height:20,className:"h-5 w-5 mr-2"}),(0,s.jsx)("span",{children:"Open MacroFactor"})]}),(0,s.jsx)("button",{className:"bg-[#4A5568] text-white py-3 px-6 rounded-2xl font-semibold shadow-glow hover:shadow-glow-hover transition duration-300 text-center",onClick:()=>A.push("/templates"),children:"\uD83D\uDDC2 Templates"})]})]}),(0,s.jsxs)("div",{className:"mt-6 p-6 bg-[#2E353A] rounded-2xl border border-pink-400 shadow-glow hover:shadow-glow-hover transition duration-300 text-center",children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-2 text-pink-400",children:"\uD83E\uDD16 CoachBot Tip"}),w?(0,s.jsxs)("div",{className:"space-y-2 animate-pulse",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-700 rounded-2xl w-3/4"}),(0,s.jsx)("div",{className:"h-4 bg-gray-700 rounded-2xl w-2/3"})]}):(0,s.jsx)("p",{className:"text-sm text-gray-300",children:p(null==g?void 0:g.muscle_group)})]}),(0,s.jsx)(u.A,{isOpen:y,message:"Are you sure you want to skip today's workout?",onCancel:()=>k(!1),onConfirm:async()=>{k(!1);let{supabase:e}=await Promise.resolve().then(o.bind(o,63233)),{error:t}=await e.from("workout_logs").insert([{date:W,forecast:!1,skipped:!0,muscle_group:(null==g?void 0:g.workout_name)||"",day:(0,d.VJ)(W)}]);t?(console.error("Error skipping workout:",t),P("Failed to skip workout. Please try again.","error")):A.push("/mission-complete?type=skipped")}}),j&&(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-75 z-50",onClick:()=>N(!1),children:(0,s.jsx)("div",{className:"bg-white px-2 py-4 rounded-lg overflow-hidden w-[95vw] max-w-none",children:(0,s.jsx)(a.default,{src:"/assets/CrunchBarcode.png",alt:"Crunch Membership Barcode",width:800,height:400,className:"w-full h-auto cursor-pointer",onClick:()=>N(!1)})})})]})}},8333:(e,t,o)=>{"use strict";o.d(t,{A:()=>l,AuthProvider:()=>i});var s=o(95155),r=o(12115),n=o(63233);let a=(0,r.createContext)(),i=e=>{let{children:t}=e,[o,i]=(0,r.useState)(void 0),[l,d]=(0,r.useState)(void 0),[u,c]=(0,r.useState)(void 0);return(0,r.useEffect)(()=>{n.supabase.auth.getSession().then(e=>{var t;let{data:{session:o}}=e;i(o),d(null!=(t=null==o?void 0:o.user)?t:null)});let{data:{subscription:e}}=n.supabase.auth.onAuthStateChange((e,t)=>{var o;i(t),d(null!=(o=null==t?void 0:t.user)?o:null),(null==t?void 0:t.user)?(async()=>{let{data:e,error:o}=await n.supabase.from("profiles").select("*").eq("user_id",t.user.id).single();o||!e?c(!1):c(!0)})():c(void 0)});return()=>{e.unsubscribe()}},[]),(0,s.jsx)(a.Provider,{value:{user:l,session:o,hasProfile:u,signInWithMagicLink:e=>n.supabase.auth.signInWithOtp({email:e,options:{emailRedirectTo:"".concat(window.location.origin,"/auth-callback")}}),signInWithProvider:e=>n.supabase.auth.signInWithOAuth({provider:e}),signInWithEmailPassword:(e,t)=>n.supabase.auth.signInWithPassword({email:e,password:t}),signUpWithEmailPassword:(e,t)=>n.supabase.auth.signUp({email:e,password:t},{emailRedirectTo:"".concat(window.location.origin,"/auth-callback")}),signOut:()=>n.supabase.auth.signOut()},children:t})},l=()=>(0,r.useContext)(a)},19433:(e,t,o)=>{"use strict";function s(){let e=new Date,t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(o,"-").concat(s)}function r(e){let t;if("string"==typeof e){let[o,s,r]=e.split("-").map(Number);t=new Date(o,s-1,r)}else t=e instanceof Date?e:new Date(e);return t.toLocaleDateString("en-US",{weekday:"long"})}function n(e){return new Date(e).toISOString().split("T")[0]}function a(e){let t,{weekday:o="short",month:s="short",day:r="numeric",includeYear:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){let[o,s,r]=e.split("-").map(Number);t=new Date(o,s-1,r)}else if(e instanceof Date)t=e;else throw Error("Invalid date input passed to formatDateWithOptions");return t.toLocaleDateString("en-US",{weekday:o,month:s,day:r,...n&&{year:"numeric"}})}o.d(t,{Gq:()=>s,KG:()=>a,VJ:()=>r,hi:()=>n})},42827:(e,t,o)=>{"use strict";o.d(t,{ToastProvider:()=>a,d:()=>i});var s=o(95155),r=o(12115);let n=(0,r.createContext)();function a(e){let{children:t}=e,[o,a]=(0,r.useState)(""),[i,l]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[c,h]=(0,r.useState)(null),[m,p]=(0,r.useState)("success");return(0,r.useEffect)(()=>{let e;return i&&(e=setTimeout(()=>{l(!1),a(""),u(!1),h(null)},5e3)),()=>clearTimeout(e)},[i,o]),(0,s.jsx)(n.Provider,{value:{message:o,visible:i,toastType:m,showToast:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};p(t),a(e),l(!0),u(o.showUndo||!1),h(()=>o.onUndo||null)},hideToast:()=>{l(!1),a("")},showUndo:d,onUndo:c},children:t})}function i(){return(0,r.useContext)(n)}},46012:(e,t,o)=>{"use strict";o.d(t,{A:()=>r});var s=o(95155);function r(e){let{isOpen:t,message:o,onConfirm:r,onCancel:n}=e;return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-gradient-to-br from-pink-500 to-pink-700 p-6 rounded-lg shadow-lg max-w-sm w-full text-center border border-pink-400",children:[(0,s.jsx)("h2",{className:"text-white text-2xl font-extrabold mb-4",children:o}),(0,s.jsxs)("div",{className:"flex gap-4 justify-center mt-6",children:[(0,s.jsx)("button",{onClick:n,className:"px-4 py-2 rounded border border-white text-white font-bold hover:bg-white hover:text-[#242B2F] transition",children:"Cancel"}),(0,s.jsx)("button",{onClick:r,className:"px-4 py-2 rounded bg-red-500 hover:bg-red-600 text-white font-bold transition",children:"Confirm"})]})]})}):null}o(12115)},47483:(e,t,o)=>{Promise.resolve().then(o.bind(o,7719))},63233:(e,t,o)=>{"use strict";o.d(t,{DP:()=>r,JI:()=>a,LJ:()=>n,sA:()=>i,supabase:()=>s});let s=(0,o(10851).UU)("https://yfnbnytutxdbmyvfsyba.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlmbmJueXR1dHhkYm15dmZzeWJhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ5MjAwNTksImV4cCI6MjA2MDQ5NjA1OX0.HJhDpx79rDzl5DZIh3qJZbBrSwudG95htPXOs2IGD30",{auth:{persistSession:!0,detectSessionInUrl:!0}}),r=async()=>{let{data:e,error:t}=await s.from("workout_logs").select("*").order("date",{ascending:!0});return t?(console.error("Error fetching workout logs:",t.message),[]):e},n=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,{data:t,error:o}=await s.from("workout_logs").select("date, skipped").order("date",{ascending:!1}).limit(e);return o?(console.error("Error fetching workout logs for last N days:",o.message),[]):t},a=e=>{let t=0;for(let o of e){if(o.skipped)break;t++}return t},i=e=>{let t=0,o=0;for(let s of e)s.skipped?(o>t&&(t=o),o=0):o++;return o>t&&(t=o),t}}},e=>{var t=t=>e(e.s=t);e.O(0,[851,212,441,684,358],()=>t(47483)),_N_E=e.O()}]);