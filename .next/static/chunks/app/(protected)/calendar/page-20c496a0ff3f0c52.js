(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43],{13346:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(95155);n(12115);var r=n(35695);function s(e){let{fallback:t="/",label:n="← Back",to:s}=e,a=(0,r.useRouter)();return(0,o.jsx)("button",{onClick:()=>{s?a.push(s):a.back()},className:"px-3 py-1 bg-gradient-to-r from-pink-500 to-pink-700 text-white rounded-2xl shadow-glow hover:shadow-glow-hover transition duration-300 text-sm",children:n})}},13588:(e,t,n)=>{Promise.resolve().then(n.bind(n,96458))},19433:(e,t,n)=>{"use strict";function o(){let e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(o)}function r(e){let t;if("string"==typeof e){let[n,o,r]=e.split("-").map(Number);t=new Date(n,o-1,r)}else t=e instanceof Date?e:new Date(e);return t.toLocaleDateString("en-US",{weekday:"long"})}function s(e){return new Date(e).toISOString().split("T")[0]}function a(e){let t,{weekday:n="short",month:o="short",day:r="numeric",includeYear:s=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){let[n,o,r]=e.split("-").map(Number);t=new Date(n,o-1,r)}else if(e instanceof Date)t=e;else throw Error("Invalid date input passed to formatDateWithOptions");return t.toLocaleDateString("en-US",{weekday:n,month:o,day:r,...s&&{year:"numeric"}})}n.d(t,{Gq:()=>o,KG:()=>a,VJ:()=>r,hi:()=>s})},42827:(e,t,n)=>{"use strict";n.d(t,{ToastProvider:()=>a,d:()=>i});var o=n(95155),r=n(12115);let s=(0,r.createContext)();function a(e){let{children:t}=e,[n,a]=(0,r.useState)(""),[i,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),[m,w]=(0,r.useState)("success");return(0,r.useEffect)(()=>{let e;return i&&(e=setTimeout(()=>{l(!1),a(""),d(!1),h(null)},5e3)),()=>clearTimeout(e)},[i,n]),(0,o.jsx)(s.Provider,{value:{message:n,visible:i,toastType:m,showToast:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};w(t),a(e),l(!0),d(n.showUndo||!1),h(()=>n.onUndo||null)},hideToast:()=>{l(!1),a("")},showUndo:c,onUndo:u},children:t})}function i(){return(0,r.useContext)(s)}},63233:(e,t,n)=>{"use strict";n.d(t,{DP:()=>r,JI:()=>a,LJ:()=>s,sA:()=>i,supabase:()=>o});let o=(0,n(10851).UU)("https://yfnbnytutxdbmyvfsyba.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlmbmJueXR1dHhkYm15dmZzeWJhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ5MjAwNTksImV4cCI6MjA2MDQ5NjA1OX0.HJhDpx79rDzl5DZIh3qJZbBrSwudG95htPXOs2IGD30",{auth:{persistSession:!0,detectSessionInUrl:!0}}),r=async()=>{let{data:e,error:t}=await o.from("workout_logs").select("*").order("date",{ascending:!0});return t?(console.error("Error fetching workout logs:",t.message),[]):e},s=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,{data:t,error:n}=await o.from("workout_logs").select("date, skipped").order("date",{ascending:!1}).limit(e);return n?(console.error("Error fetching workout logs for last N days:",n.message),[]):t},a=e=>{let t=0;for(let n of e){if(n.skipped)break;t++}return t},i=e=>{let t=0,n=0;for(let o of e)o.skipped?(n>t&&(t=n),n=0):n++;return n>t&&(t=n),t}},96458:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var o=n(95155),r=n(12115),s=n(84423),a=n(55551),i=n(91588),l=n(80079),c=n(67386),d=n(43163),u=n(53231),h=n(32944),m=n(72794),w=n(29161),f=n(97726),p=n(54549),g=n(37223),x=n(69021),k=n(48882),b=n(35695),v=n(42827),y=n(55028),j=n(63233),S=n(19433),N=n(13346);let C=(0,y.default)(()=>Promise.all([n.e(545),n.e(98)]).then(n.bind(n,35098)).then(e=>({default:e.AnimatePresence})),{loadableGenerated:{webpack:()=>[null]},ssr:!1}),D=(0,y.default)(()=>Promise.all([n.e(545),n.e(98)]).then(n.bind(n,35098)).then(e=>({default:e.motion.div})),{loadableGenerated:{webpack:()=>[null]},ssr:!1});function _(){let{showToast:e}=(0,v.d)(),t=(0,b.useRouter)();(0,b.usePathname)();let n=new Date,y=(0,r.useRef)(null);(0,r.useRef)({});let _=(0,r.useRef)(null),I=(0,r.useRef)(null),[E,J]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=()=>{window.scrollY>10?J(!0):J(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);let[M,L]=(0,r.useState)("week"),[O,F]=(0,r.useState)(n),[P,T]=(0,r.useState)([]),[G,U]=(0,r.useState)([]),[Y,A]=(0,r.useState)(!0),B=(0,s.k)(O,{weekStartsOn:1}),R=new Date((0,a.C)(O),(0,i.t)(O)),X=(0,a.C)(n),V=(0,r.useMemo)(()=>(0,l.k)({start:(0,c.D)(new Date(X,0,1)),end:(0,d.Q)(new Date(X,11,31))}),[X]);(0,r.useMemo)(()=>V.reduce((e,t)=>{let n=t.toLocaleDateString("en-US",{month:"long",year:"numeric"});return e[n]||(e[n]=[]),e[n].push(t),e},{}),[V]);let z=(0,r.useMemo)(()=>(0,l.k)({start:(0,u.w)(O),end:(0,h.p)(O)}),[O]),K=(0,r.useMemo)(()=>(0,l.k)({start:(0,s.k)(O,{weekStartsOn:1}),end:(0,m.$)(O,{weekStartsOn:1})}),[O]),Z="week"===M&&O.toDateString()===n.toDateString()||"month"===M&&O.getMonth()===n.getMonth()&&O.getFullYear()===n.getFullYear();async function H(){let{data:e,error:t}=await j.supabase.from("workout_logs").select("*");t?console.error("Error fetching logs:",t):T(e)}async function Q(){let{data:e,error:t}=await j.supabase.from("workout_templates").select("day_of_week, workout_name");t||U(e)}async function W(){A(!0),await new Promise(e=>setTimeout(e,150)),await Promise.all([H(),Q()]),A(!1)}(0,r.useEffect)(()=>{window.lastViewMode=M},[M]),(0,r.useEffect)(()=>{W()},[]),(0,r.useEffect)(()=>{"month"===M&&y.current&&y.current.scrollIntoView({behavior:"smooth",block:"center"})},[M]);let q=e=>{let o=(0,S.hi)(e);F(e);let r=P.find(e=>e.date===o);(null==r?void 0:r.skipped)||r&&!r.forecast?t.push("/summary?date=".concat(o)):(null==r?void 0:r.forecast)?t.push("/preview?date=".concat(o)):!r&&(0,w.Y)(e,n)&&!(0,f.c)(e)?t.push("/summary?date=".concat(o)):t.push("/preview?date=".concat(o))},$=()=>{"week"===M?F(e=>(0,p.k)(e,1)):"month"===M&&F(e=>(0,g.a)(e,1))},ee=()=>{"week"===M?F(e=>(0,x.J)(e,1)):"month"===M&&F(e=>(0,k.P)(e,1))};return(0,o.jsxs)("div",{className:"min-h-screen bg-[#242B2F] text-white px-4 pt-0 pb-52 max-w-3xl mx-auto",onTouchStart:"week"===M?e=>{_.current=e.touches[0].clientX,I.current=e.touches[0].clientY}:void 0,onTouchEnd:"week"===M?e=>{if(null==_.current||null==I.current)return;let t=e.changedTouches[0].clientY-I.current;Math.abs(t)>Math.abs(e.changedTouches[0].clientX-_.current)&&Math.abs(t)>50&&(t>0?$():ee()),_.current=null,I.current=null}:void 0,style:{touchAction:"week"===M?"none":"auto"},children:[(0,o.jsxs)("div",{className:"sticky inset-x-0 top-0 z-10 bg-[#242B2F] pb-4",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center pt-4 pb-2 flex-wrap gap-2 sm:flex-nowrap",children:[(0,o.jsx)("div",{className:"flex items-center gap-2",children:(0,o.jsx)(N.A,{to:"/",label:"Home"})}),"year"!==M&&(0,o.jsxs)("div",{className:"flex justify-center items-center gap-4",children:[(0,o.jsx)("button",{onClick:$,className:"p-2 w-10 h-10 flex items-center justify-center bg-gradient-to-r from-pink-500 to-pink-700 text-white rounded-full shadow-glow hover:shadow-glow-hover transition duration-300","aria-label":"Previous",children:"←"}),(0,o.jsx)("h2",{className:"text-lg font-semibold text-[#C63663]",children:"week"===M?"Week of ".concat(B.toLocaleDateString("en-US",{month:"short",day:"numeric"})):R.toLocaleDateString("en-US",{weekday:void 0,month:"long",year:"numeric"})}),(0,o.jsx)("button",{onClick:ee,className:"p-2 w-10 h-10 flex items-center justify-center bg-gradient-to-r from-pink-500 to-pink-700 text-white rounded-full shadow-glow hover:shadow-glow-hover transition duration-300","aria-label":"Next",children:"→"})]}),(0,o.jsx)("div",{className:"flex items-center gap-2",children:(0,o.jsx)("button",{onClick:()=>{F(n)},disabled:Z,className:"px-3 py-1 rounded-2xl text-sm transition duration-300 ".concat(Z?"bg-pink-700 text-gray-200 cursor-not-allowed opacity-60":"bg-gradient-to-r from-pink-500 to-pink-700 text-white shadow-glow hover:shadow-glow-hover"),children:"Today"})})]}),(0,o.jsx)("div",{className:"flex justify-between items-center flex-wrap gap-2 sm:flex-nowrap",children:(0,o.jsx)("div",{className:"flex gap-2 mt-2 sm:mt-0",children:["week","month"].map(e=>(0,o.jsx)("button",{onClick:()=>L(e),className:"text-sm px-3 py-1 rounded-2xl font-medium transition duration-300 ".concat(M===e?"bg-gradient-to-r from-pink-500 to-pink-700 text-white shadow-glow":"border border-pink-400 text-white hover:bg-white/10 hover:shadow-glow-hover"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})})]}),Y?(0,o.jsx)("div",{className:"min-h-screen bg-[#242B2F] flex items-center justify-center",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-pink-400"})}):(0,o.jsx)("div",{className:"space-y-6 mt-2",children:"week"===M?(window._splitForecastCache=null,(0,o.jsx)(C,{mode:"wait",children:(0,o.jsx)(D,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.25},className:"space-y-3 relative",style:{minHeight:"420px",overflowAnchor:"none"},children:K.map(e=>{let t=(0,f.c)(e),r=(0,S.KG)(e,{weekday:"long"}).split(",")[0],s=(0,S.KG)(e).split(", ")[1],a=(0,S.hi)(e),i=P.find(e=>e.date===a),l="— No plan";if(null==i?void 0:i.skipped)l="⛔ Skipped";else if(i&&!i.forecast)l="✓ Logged";else if(i&&i.forecast)l="\uD83C\uDFCB️ ".concat(i.muscle_group||i.workout_name);else if(!i&&(0,w.Y)(e,n)&&!(0,f.c)(e))l="❓ Not logged";else{let t=(0,S.VJ)(e).toLowerCase().trim(),n=G.find(e=>e.day_of_week&&e.day_of_week.toLowerCase().trim()===t);n&&(l="\uD83C\uDFCB️ ".concat(n.workout_name))}return(0,o.jsx)("button",{onClick:()=>q(e),className:"w-full text-left p-4 rounded-lg shadow-md transition duration-200\n                    ".concat(t?"bg-[#C63663] text-white ring-2 ring-white":"bg-[#343E44] text-gray-300","\n                    ").concat((null==i?void 0:i.skipped)?"border border-red-500":"","\n                    hover:ring-2 hover:ring-[#C63663] hover:scale-[1.02]"),children:(0,o.jsx)("div",{className:"flex justify-between items-center",children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"font-semibold text-sm uppercase",children:[r,", ",s]}),(0,o.jsx)("div",{className:"text-xs text-gray-200",children:l})]})})},e.toISOString())})},"week-".concat((0,S.KG)(O)))})):(window._splitForecastCache=null,(0,o.jsx)(D,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"grid grid-cols-7 gap-3",children:z.map(e=>{let t=(0,f.c)(e),r=(0,S.KG)(e,{weekday:"short"}).split(",")[0],s=new Date(e).getDate(),a=(0,S.hi)(e),i=P.find(e=>e.date===a),l="—";if(null==i?void 0:i.skipped)l="⛔";else if(i&&!i.forecast)l="✓";else if(null==i?void 0:i.forecast)l="\uD83C\uDFCB️ ";else if(!i&&(0,w.Y)(e,n)&&!(0,f.c)(e))l="❓";else{let t=(0,S.VJ)(e).toLowerCase().trim(),n=G.find(e=>e.day_of_week&&e.day_of_week.toLowerCase().trim()===t);n&&(l="month"===M?"\uD83C\uDFCB️":"\uD83C\uDFCB️ ".concat(n.workout_name))}return(0,o.jsxs)("button",{ref:t?y:null,onClick:()=>q(e),className:"h-20 rounded-lg px-2 py-1 text-left flex flex-col justify-between transition duration-200\n                  ".concat(t?"bg-[#C63663] text-white ring-2 ring-white":"bg-[#343E44] text-gray-300","\n                  ").concat((null==i?void 0:i.skipped)?"border border-red-500":"","\n                  hover:ring-2 hover:ring-[#C63663] hover:scale-[1.02]"),children:[(0,o.jsx)("div",{className:"text-xs font-bold uppercase ".concat(t?"text-white":"text-[#C63663]"),children:r}),(0,o.jsx)("div",{className:"text-lg font-bold text-white",children:s}),(0,o.jsx)("div",{className:"text-xs mt-1 text-gray-300",children:l})]},e.toISOString())})},"".concat(M,"-").concat((0,S.KG)(O))))})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[851,263,441,684,358],()=>t(13588)),_N_E=e.O()}]);