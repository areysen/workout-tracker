(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{7365:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u,dynamic:()=>o});var a=s(95155),n=s(12115),i=s(8333),r=s(66766),l=s(35695);let o="force-dynamic";function u(){let[e,t]=(0,n.useState)(""),[s,o]=(0,n.useState)(""),[u,c]=(0,n.useState)(!1),[d,h]=(0,n.useState)(null),[g,p]=(0,n.useState)(!1),{signInWithMagicLink:m,signInWithProvider:x,signInWithEmailPassword:b,signUpWithEmailPassword:f}=(0,i.A)(),y=(0,l.useRouter)(),w=async t=>{let a;t.preventDefault(),c(!0);let{error:n}=g&&s?await f(e,s):s?await b(e,s):await m(e);n?h({type:"error",text:n.message}):(g?(h({type:"success",text:"✅ Check your inbox to confirm your email!"}),p(!1)):h({type:"success",text:s?"✅ Signed in successfully!":"✅ Check your inbox for the magic link!"}),s&&y.push("/today")),c(!1)};return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-[#242B2F] p-4",children:[(0,a.jsxs)("form",{onSubmit:w,className:"bg-[#343E44] p-6 rounded-lg w-full max-w-sm space-y-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-white text-center",children:"Welcome Back"}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("button",{type:"button",onClick:()=>x("google"),className:"w-full flex items-center justify-center py-2 rounded-2xl bg-white border border-gray-300 hover:bg-gray-50 transition",children:[(0,a.jsx)(r.default,{src:"/assets/google-logo.png",alt:"Google logo",width:20,height:20,className:"mr-2"}),"Continue with Google"]})}),(0,a.jsxs)("div",{className:"flex items-center my-4",children:[(0,a.jsx)("hr",{className:"flex-grow border-gray-600"}),(0,a.jsx)("span",{className:"px-3 text-gray-400",children:"or"}),(0,a.jsx)("hr",{className:"flex-grow border-gray-600"})]}),d&&(0,a.jsx)("div",{className:"text-sm ".concat("error"===d.type?"text-red-400":"text-green-400"),children:d.text}),(0,a.jsx)("input",{type:"email",placeholder:"you@example.com",required:!0,value:e,onChange:e=>t(e.target.value),className:"w-full px-3 py-2 rounded-2xl bg-[#242B2F] text-white focus:outline-none"}),(0,a.jsx)("input",{type:"password",placeholder:"Password (leave blank for magic link)",value:s,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 rounded-2xl bg-[#242B2F] text-white focus:outline-none"}),(0,a.jsx)("button",{type:"submit",disabled:u,className:"w-full py-2 rounded-2xl bg-gradient-to-r from-pink-500 to-pink-700 text-white shadow-glow hover:shadow-glow-hover transition",children:u?g?"Signing Up…":s?"Signing In…":"Sending…":g?"Sign Up":s?"Sign In":"Email me a link"})]}),(0,a.jsxs)("p",{className:"mt-4 text-sm text-gray-400 text-center",children:[g?"Already have an account? ":"Don't have an account? ",(0,a.jsx)("button",{type:"button",className:"underline",onClick:()=>p(!g),children:g?"Sign in":"Sign up"})]})]})}},8333:(e,t,s)=>{"use strict";s.d(t,{A:()=>o,AuthProvider:()=>l});var a=s(95155),n=s(12115),i=s(63233);let r=(0,n.createContext)(),l=e=>{let{children:t}=e,[s,l]=(0,n.useState)(void 0),[o,u]=(0,n.useState)(void 0),[c,d]=(0,n.useState)(void 0);return(0,n.useEffect)(()=>{i.supabase.auth.getSession().then(e=>{var t;let{data:{session:s}}=e;l(s),u(null!=(t=null==s?void 0:s.user)?t:null)});let{data:{subscription:e}}=i.supabase.auth.onAuthStateChange((e,t)=>{var s;l(t),u(null!=(s=null==t?void 0:t.user)?s:null),(null==t?void 0:t.user)?(async()=>{let{data:e,error:s}=await i.supabase.from("profiles").select("*").eq("user_id",t.user.id).single();s||!e?d(!1):d(!0)})():d(void 0)});return()=>{e.unsubscribe()}},[]),(0,a.jsx)(r.Provider,{value:{user:o,session:s,hasProfile:c,signInWithMagicLink:e=>i.supabase.auth.signInWithOtp({email:e,options:{emailRedirectTo:"".concat(window.location.origin,"/auth-callback")}}),signInWithProvider:e=>i.supabase.auth.signInWithOAuth({provider:e}),signInWithEmailPassword:(e,t)=>i.supabase.auth.signInWithPassword({email:e,password:t}),signUpWithEmailPassword:(e,t)=>i.supabase.auth.signUp({email:e,password:t},{emailRedirectTo:"".concat(window.location.origin,"/auth-callback")}),signOut:()=>i.supabase.auth.signOut()},children:t})},o=()=>(0,n.useContext)(r)},22699:(e,t,s)=>{Promise.resolve().then(s.bind(s,7365))},63233:(e,t,s)=>{"use strict";s.d(t,{DP:()=>n,JI:()=>r,LJ:()=>i,sA:()=>l,supabase:()=>a});let a=(0,s(10851).UU)("https://yfnbnytutxdbmyvfsyba.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlmbmJueXR1dHhkYm15dmZzeWJhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ5MjAwNTksImV4cCI6MjA2MDQ5NjA1OX0.HJhDpx79rDzl5DZIh3qJZbBrSwudG95htPXOs2IGD30",{auth:{persistSession:!0,detectSessionInUrl:!0}}),n=async()=>{let{data:e,error:t}=await a.from("workout_logs").select("*").order("date",{ascending:!0});return t?(console.error("Error fetching workout logs:",t.message),[]):e},i=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,{data:t,error:s}=await a.from("workout_logs").select("date, skipped").order("date",{ascending:!1}).limit(e);return s?(console.error("Error fetching workout logs for last N days:",s.message),[]):t},r=e=>{let t=0;for(let s of e){if(s.skipped)break;t++}return t},l=e=>{let t=0,s=0;for(let a of e)a.skipped?(s>t&&(t=s),s=0):s++;return s>t&&(t=s),t}}},e=>{var t=t=>e(e.s=t);e.O(0,[851,212,441,684,358],()=>t(22699)),_N_E=e.O()}]);